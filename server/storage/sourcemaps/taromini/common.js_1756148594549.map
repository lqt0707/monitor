{"version":3,"file":"common.js","mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://taromini/.._.._sdk_taro-core_dist_index.esm.js"],"sourcesContent":["/**\n * ç›‘æ§SDKé€šç”¨å·¥å…·å‡½æ•°\n * æä¾›å„å¹³å°é€šç”¨çš„å·¥å…·æ–¹æ³•\n */\n/**\n * ç”Ÿæˆå”¯ä¸€ID\n * @returns å”¯ä¸€IDå­—ç¬¦ä¸²\n */\nfunction generateId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n}\n/**\n * è·å–å½“å‰æ—¶é—´æˆ³\n * @returns æ—¶é—´æˆ³\n */\nfunction getTimestamp() {\n    return Date.now();\n}\n/**\n * ç”Ÿæˆä¼šè¯ID\n * @returns ä¼šè¯ID\n */\nfunction generateSessionId() {\n    const timestamp = Date.now().toString(36);\n    const random = Math.random().toString(36).substr(2, 9);\n    return `session_${timestamp}_${random}`;\n}\n/**\n * åºåˆ—åŒ–é”™è¯¯å¯¹è±¡\n * @param error é”™è¯¯å¯¹è±¡\n * @returns åºåˆ—åŒ–åçš„é”™è¯¯ä¿¡æ¯\n */\nfunction serializeError(error) {\n    if (!error)\n        return null;\n    if (error instanceof Error) {\n        return {\n            name: error.name,\n            message: error.message,\n            stack: error.stack,\n            // ä¿ç•™å…¶ä»–å¯èƒ½çš„å±æ€§\n            ...Object.getOwnPropertyNames(error).reduce((result, key) => {\n                if (![\"name\", \"message\", \"stack\"].includes(key)) {\n                    result[key] = error[key];\n                }\n                return result;\n            }, {}),\n        };\n    }\n    if (typeof error === \"string\") {\n        return { message: error };\n    }\n    try {\n        return JSON.parse(JSON.stringify(error));\n    }\n    catch (_a) {\n        return { message: String(error) };\n    }\n}\n\n/**\n * æ ¸å¿ƒåŸºç¡€ç®¡ç†å™¨\n * æä¾›ç›‘æ§SDKçš„åŸºç¡€åŠŸèƒ½ï¼šé…ç½®ç®¡ç†ã€äº‹ä»¶ç³»ç»Ÿã€é˜Ÿåˆ—ç®¡ç†ç­‰\n */\n/**\n * ç›‘æ§SDKæ ¸å¿ƒç®¡ç†å™¨\n */\nclass BaseManager {\n    constructor(config, platformAdapter) {\n        this.dataQueue = [];\n        this.isInitialized = false;\n        this.isEnabled = true;\n        this.listeners = new Map();\n        this.config = this.mergeConfig(config);\n        this.platformAdapter = platformAdapter;\n        this.sessionId = generateSessionId();\n    }\n    /**\n     * åˆå¹¶é»˜è®¤é…ç½®å’Œç”¨æˆ·é…ç½®\n     * @param userConfig ç”¨æˆ·é…ç½®\n     * @returns åˆå¹¶åçš„é…ç½®\n     */\n    mergeConfig(userConfig) {\n        const defaultConfig = {\n            enableInDev: false,\n            sampleRate: 1,\n            error: {\n                enabled: true,\n                maxErrors: 100,\n                filters: [],\n                sampleRate: 1,\n            },\n            performance: {\n                enabled: true,\n                maxPerformance: 100,\n                enableResourceTiming: true,\n                enableUserTiming: true,\n            },\n            behavior: {\n                enabled: true,\n                maxBehaviors: 200,\n                autoTrackClick: true,\n                autoTrackPageView: true,\n            },\n            report: {\n                interval: 10000,\n                maxQueueSize: 500,\n                batchSize: 20,\n                timeout: 5000,\n                maxRetries: 3,\n                retryDelay: 2000,\n                enableOfflineCache: true,\n            },\n        };\n        return this.deepMerge(defaultConfig, userConfig);\n    }\n    /**\n     * æ·±åº¦åˆå¹¶å¯¹è±¡\n     * @param target ç›®æ ‡å¯¹è±¡\n     * @param source æºå¯¹è±¡\n     * @returns åˆå¹¶åçš„å¯¹è±¡\n     */\n    deepMerge(target, source) {\n        const result = { ...target };\n        for (const key in source) {\n            if (source.hasOwnProperty(key)) {\n                if (typeof source[key] === \"object\" &&\n                    source[key] !== null &&\n                    !Array.isArray(source[key])) {\n                    result[key] = this.deepMerge(target[key] || {}, source[key]);\n                }\n                else {\n                    result[key] = source[key];\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * åˆå§‹åŒ–ç›‘æ§SDK\n     */\n    async init() {\n        if (this.isInitialized) {\n            console.warn(\"[Monitor] SDK already initialized\");\n            return;\n        }\n        // æ£€æŸ¥ç¯å¢ƒæ˜¯å¦åº”è¯¥å¯ç”¨ç›‘æ§\n        if (!this.shouldEnable()) {\n            this.isEnabled = false;\n            return;\n        }\n        try {\n            // åˆå§‹åŒ–å¹³å°é€‚é…å™¨\n            await this.platformAdapter.init(this.config);\n            // åˆå§‹åŒ–å„ä¸ªç›‘æ§æ¨¡å—\n            this.initErrorMonitor();\n            this.initPerformanceMonitor();\n            this.initBehaviorMonitor();\n            // å¯åŠ¨å®šæ—¶ä¸ŠæŠ¥\n            this.startReportTimer();\n            this.isInitialized = true;\n            this.emit(\"init\", this.getStatus());\n            console.log(\"[Monitor] SDK initialized successfully\");\n        }\n        catch (error) {\n            console.error(\"[Monitor] Failed to initialize SDK:\", error);\n            this.emit(\"error\", error);\n            throw error;\n        }\n    }\n    /**\n     * æ£€æŸ¥æ˜¯å¦åº”è¯¥å¯ç”¨ç›‘æ§\n     * @returns æ˜¯å¦å¯ç”¨\n     */\n    shouldEnable() {\n        // å¼€å‘ç¯å¢ƒæ£€æŸ¥\n        if (this.isDevelopment() && !this.config.enableInDev) {\n            return false;\n        }\n        // é‡‡æ ·ç‡æ£€æŸ¥\n        if (Math.random() > (this.config.sampleRate || 1)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * æ£€æŸ¥æ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒ\n     * @returns æ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒ\n     */\n    isDevelopment() {\n        // æ ¹æ®ä¸åŒå¹³å°åˆ¤æ–­å¼€å‘ç¯å¢ƒ\n        if (typeof process !== \"undefined\" && process.env) {\n            return \"development\" === \"development\";\n        }\n        if (typeof globalThis !== \"undefined\" &&\n            typeof globalThis.location !== \"undefined\") {\n            return (globalThis.location.hostname === \"localhost\" ||\n                globalThis.location.hostname === \"127.0.0.1\");\n        }\n        return false;\n    }\n    /**\n     * åˆå§‹åŒ–é”™è¯¯ç›‘æ§\n     */\n    initErrorMonitor() {\n        var _a;\n        if (!((_a = this.config.error) === null || _a === void 0 ? void 0 : _a.enabled))\n            return;\n        this.platformAdapter.errorCapture.initErrorListeners((errorData) => {\n            this.addToQueue(errorData);\n            this.emit(\"error\", errorData);\n        });\n    }\n    /**\n     * åˆå§‹åŒ–æ€§èƒ½ç›‘æ§\n     */\n    initPerformanceMonitor() {\n        var _a;\n        if (!((_a = this.config.performance) === null || _a === void 0 ? void 0 : _a.enabled))\n            return;\n        this.platformAdapter.performance.initPerformanceMonitor((performanceData) => {\n            this.addToQueue(performanceData);\n            this.emit(\"performance\", performanceData);\n        });\n    }\n    /**\n     * åˆå§‹åŒ–è¡Œä¸ºç›‘æ§\n     */\n    initBehaviorMonitor() {\n        var _a;\n        if (!((_a = this.config.behavior) === null || _a === void 0 ? void 0 : _a.enabled))\n            return;\n        this.platformAdapter.behavior.initBehaviorMonitor((behaviorData) => {\n            this.addToQueue(behaviorData);\n            this.emit(\"behavior\", behaviorData);\n        });\n    }\n    /**\n     * æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—\n     * @param data ç›‘æ§æ•°æ®\n     */\n    addToQueue(data) {\n        var _a;\n        if (!this.isEnabled)\n            return;\n        // å¡«å……åŸºç¡€ä¿¡æ¯\n        data.projectId = this.config.projectId;\n        data.userId = this.config.userId;\n        data.sessionId = this.sessionId;\n        data.platform = this.platformAdapter.platformInfo.platform;\n        // æ·»åŠ é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯\n        if (this.config.projectVersion) {\n            data.projectVersion = this.config.projectVersion;\n        }\n        if (this.config.tags) {\n            data.tags = { ...data.tags, ...this.config.tags };\n        }\n        // æ£€æŸ¥é˜Ÿåˆ—å¤§å°é™åˆ¶\n        const maxQueueSize = ((_a = this.config.report) === null || _a === void 0 ? void 0 : _a.maxQueueSize) || 500;\n        if (this.dataQueue.length >= maxQueueSize) {\n            // ç§»é™¤æœ€æ—§çš„æ•°æ®\n            this.dataQueue.shift();\n        }\n        this.dataQueue.push(data);\n        this.emit(\"dataAdded\", data);\n    }\n    /**\n     * å¯åŠ¨å®šæ—¶ä¸ŠæŠ¥\n     */\n    startReportTimer() {\n        var _a;\n        const interval = ((_a = this.config.report) === null || _a === void 0 ? void 0 : _a.interval) || 10000;\n        this.reportTimer = setInterval(() => {\n            this.flush();\n        }, interval);\n    }\n    /**\n     * ç«‹å³ä¸ŠæŠ¥æ‰€æœ‰æ•°æ®\n     * @returns Promise\n     */\n    async flush() {\n        var _a;\n        if (!this.isEnabled || this.dataQueue.length === 0) {\n            return;\n        }\n        const batchSize = ((_a = this.config.report) === null || _a === void 0 ? void 0 : _a.batchSize) || 20;\n        const dataToSend = this.dataQueue.splice(0, batchSize);\n        try {\n            await this.sendData(dataToSend);\n            this.emit(\"dataReported\", dataToSend);\n        }\n        catch (error) {\n            // å‘é€å¤±è´¥ï¼Œå°†æ•°æ®é‡æ–°æ”¾å›é˜Ÿåˆ—\n            this.dataQueue.unshift(...dataToSend);\n            this.emit(\"reportError\", error);\n            throw error;\n        }\n    }\n    /**\n     * å‘é€æ•°æ®åˆ°æœåŠ¡å™¨\n     * @param data è¦å‘é€çš„æ•°æ®\n     */\n    async sendData(data) {\n        var _a, _b;\n        const url = `${this.config.serverUrl}/api/monitor/report`;\n        const options = {\n            timeout: ((_a = this.config.report) === null || _a === void 0 ? void 0 : _a.timeout) || 5000,\n            retries: ((_b = this.config.report) === null || _b === void 0 ? void 0 : _b.maxRetries) || 3,\n            headers: this.config.apiKey\n                ? { \"X-API-Key\": this.config.apiKey }\n                : undefined,\n        };\n        await this.platformAdapter.network.sendData(url, data, options);\n    }\n    /**\n     * æ‰‹åŠ¨æ•è·é”™è¯¯\n     * @param error é”™è¯¯å¯¹è±¡æˆ–æ¶ˆæ¯\n     * @param extra é¢å¤–ä¿¡æ¯\n     */\n    captureError(error, extra) {\n        var _a;\n        if (!((_a = this.config.error) === null || _a === void 0 ? void 0 : _a.enabled))\n            return;\n        const errorData = this.platformAdapter.errorCapture.captureError(error, extra);\n        this.addToQueue(errorData);\n    }\n    /**\n     * æ‰‹åŠ¨è®°å½•æ€§èƒ½æŒ‡æ ‡\n     * @param name æŒ‡æ ‡åç§°\n     * @param metrics æŒ‡æ ‡æ•°æ®\n     */\n    recordPerformance(name, metrics) {\n        var _a;\n        if (!((_a = this.config.performance) === null || _a === void 0 ? void 0 : _a.enabled))\n            return;\n        const performanceData = this.platformAdapter.performance.recordPerformance(name, metrics);\n        this.addToQueue(performanceData);\n    }\n    /**\n     * æ‰‹åŠ¨è®°å½•ç”¨æˆ·è¡Œä¸º\n     * @param event äº‹ä»¶åç§°\n     * @param data äº‹ä»¶æ•°æ®\n     */\n    recordBehavior(event, data) {\n        var _a;\n        if (!((_a = this.config.behavior) === null || _a === void 0 ? void 0 : _a.enabled))\n            return;\n        const behaviorData = this.platformAdapter.behavior.recordBehavior(event, data);\n        this.addToQueue(behaviorData);\n    }\n    /**\n     * è·å–SDKçŠ¶æ€\n     * @returns SDKçŠ¶æ€\n     */\n    getStatus() {\n        var _a, _b, _c, _d, _e;\n        const errorCount = this.dataQueue.filter((item) => \"type\" in item && item.type).length;\n        const performanceCount = this.dataQueue.filter((item) => \"metrics\" in item).length;\n        const behaviorCount = this.dataQueue.filter((item) => \"event\" in item).length;\n        return {\n            initialized: this.isInitialized,\n            enabled: this.isEnabled,\n            queue: {\n                size: this.dataQueue.length,\n                maxSize: ((_a = this.config.report) === null || _a === void 0 ? void 0 : _a.maxQueueSize) || 500,\n                isFull: this.dataQueue.length >= (((_b = this.config.report) === null || _b === void 0 ? void 0 : _b.maxQueueSize) || 500),\n                errorCount,\n                performanceCount,\n                behaviorCount,\n            },\n            lastReportTime: Date.now(),\n            errorMonitor: !!((_c = this.config.error) === null || _c === void 0 ? void 0 : _c.enabled),\n            performanceMonitor: !!((_d = this.config.performance) === null || _d === void 0 ? void 0 : _d.enabled),\n            behaviorMonitor: !!((_e = this.config.behavior) === null || _e === void 0 ? void 0 : _e.enabled),\n        };\n    }\n    /**\n     * é”€æ¯SDK\n     */\n    destroy() {\n        if (!this.isInitialized)\n            return;\n        // æ¸…ç†å®šæ—¶å™¨\n        if (this.reportTimer) {\n            clearInterval(this.reportTimer);\n            this.reportTimer = undefined;\n        }\n        // æœ€åä¸€æ¬¡ä¸ŠæŠ¥\n        this.flush().catch((error) => {\n            console.warn(\"[Monitor] Failed to flush data on destroy:\", error);\n        });\n        // é”€æ¯å¹³å°é€‚é…å™¨\n        this.platformAdapter.destroy();\n        // æ¸…ç†çŠ¶æ€\n        this.dataQueue = [];\n        this.listeners.clear();\n        this.isInitialized = false;\n        this.isEnabled = false;\n        this.emit(\"destroy\");\n        console.log(\"[Monitor] SDK destroyed\");\n    }\n    // EventEmitter å®ç°\n    on(event, listener) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, []);\n        }\n        this.listeners.get(event).push(listener);\n    }\n    off(event, listener) {\n        if (!this.listeners.has(event))\n            return;\n        if (listener) {\n            const listeners = this.listeners.get(event);\n            const index = listeners.indexOf(listener);\n            if (index > -1) {\n                listeners.splice(index, 1);\n            }\n        }\n        else {\n            this.listeners.delete(event);\n        }\n    }\n    emit(event, ...args) {\n        if (!this.listeners.has(event))\n            return false;\n        const listeners = this.listeners.get(event);\n        listeners.forEach((listener) => {\n            try {\n                listener(...args);\n            }\n            catch (error) {\n                console.error(`[Monitor] Error in event listener for '${event}':`, error);\n            }\n        });\n        return true;\n    }\n    once(event, listener) {\n        const onceListener = (...args) => {\n            this.off(event, onceListener);\n            listener(...args);\n        };\n        this.on(event, onceListener);\n    }\n}\n\n/**\n * ç›‘æ§SDKæ ¸å¿ƒç±»å‹å®šä¹‰\n * ç»Ÿä¸€å„å¹³å°çš„æ•°æ®ç±»å‹ï¼Œç¡®ä¿æ•°æ®ç»“æ„ä¸€è‡´æ€§\n */\n/**\n * é”™è¯¯ç±»å‹æšä¸¾\n */\nvar ErrorType;\n(function (ErrorType) {\n    /** JavaScriptè¿è¡Œæ—¶é”™è¯¯ */\n    ErrorType[\"JS_ERROR\"] = \"js_error\";\n    /** Promiseæœªæ•è·é”™è¯¯ */\n    ErrorType[\"PROMISE_ERROR\"] = \"promise_error\";\n    /** èµ„æºåŠ è½½é”™è¯¯ */\n    ErrorType[\"RESOURCE_ERROR\"] = \"resource_error\";\n    /** ç½‘ç»œè¯·æ±‚é”™è¯¯ */\n    ErrorType[\"HTTP_ERROR\"] = \"http_error\";\n    /** è‡ªå®šä¹‰é”™è¯¯ */\n    ErrorType[\"CUSTOM_ERROR\"] = \"custom_error\";\n    /** æ¡†æ¶é”™è¯¯ */\n    ErrorType[\"FRAMEWORK_ERROR\"] = \"framework_error\";\n})(ErrorType || (ErrorType = {}));\n/**\n * æ€§èƒ½æŒ‡æ ‡ç±»å‹\n */\nvar PerformanceType;\n(function (PerformanceType) {\n    /** é¡µé¢åŠ è½½æ€§èƒ½ */\n    PerformanceType[\"PAGE_LOAD\"] = \"page_load\";\n    /** ç½‘ç»œè¯·æ±‚æ€§èƒ½ */\n    PerformanceType[\"HTTP_REQUEST\"] = \"http_request\";\n    /** èµ„æºåŠ è½½æ€§èƒ½ */\n    PerformanceType[\"RESOURCE_LOAD\"] = \"resource_load\";\n    /** ç”¨æˆ·äº¤äº’æ€§èƒ½ */\n    PerformanceType[\"USER_INTERACTION\"] = \"user_interaction\";\n    /** è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡ */\n    PerformanceType[\"CUSTOM_METRIC\"] = \"custom_metric\";\n})(PerformanceType || (PerformanceType = {}));\n/**\n * ç”¨æˆ·è¡Œä¸ºç±»å‹\n */\nvar BehaviorType;\n(function (BehaviorType) {\n    /** é¡µé¢è®¿é—® */\n    BehaviorType[\"PAGE_VIEW\"] = \"page_view\";\n    /** ç‚¹å‡»äº‹ä»¶ */\n    BehaviorType[\"CLICK\"] = \"click\";\n    /** æ»šåŠ¨äº‹ä»¶ */\n    BehaviorType[\"SCROLL\"] = \"scroll\";\n    /** è¡¨å•æäº¤ */\n    BehaviorType[\"FORM_SUBMIT\"] = \"form_submit\";\n    /** è·¯ç”±å˜åŒ– */\n    BehaviorType[\"ROUTE_CHANGE\"] = \"route_change\";\n    /** è‡ªå®šä¹‰äº‹ä»¶ */\n    BehaviorType[\"CUSTOM\"] = \"custom\";\n})(BehaviorType || (BehaviorType = {}));\n\n/**\n * Taroå¹³å°é€‚é…å™¨å®ç°\n * å®ç°Taroç¯å¢ƒä¸‹çš„ç›‘æ§åŠŸèƒ½é€‚é…ï¼Œå…¼å®¹Taroæ¡†æ¶å’ŒåŸç”Ÿå¾®ä¿¡å°ç¨‹åº\n */\n// å…¼å®¹æ€§æ£€æµ‹\nconst isTaroEnv = typeof Taro !== \"undefined\";\nconst isWxEnv = typeof wx !== \"undefined\";\n/**\n * Taroé”™è¯¯æ•è·é€‚é…å™¨\n */\nclass TaroErrorCapture {\n    /**\n     * è®¾ç½®é…ç½®\n     * @param config é…ç½®å¯¹è±¡\n     */\n    setConfig(config) {\n        this.config = config;\n    }\n    /**\n     * è·å–é¡¹ç›®ID\n     * @returns é¡¹ç›®ID\n     */\n    getProjectId() {\n        var _a;\n        return ((_a = this.config) === null || _a === void 0 ? void 0 : _a.projectId) || \"default-project\";\n    }\n    initErrorListeners(onError) {\n        this.onError = onError;\n        this.setupGlobalErrorHandler();\n        this.setupUnhandledRejectionHandler();\n        this.setupConsoleErrorHandler();\n    }\n    /**\n     * è®¾ç½®å…¨å±€é”™è¯¯å¤„ç†å™¨\n     */\n    setupGlobalErrorHandler() {\n        if (isTaroEnv && Taro.onError) {\n            Taro.onError((error) => {\n                this.handleError(ErrorType.JS_ERROR, error, { source: \"Taro.onError\" });\n            });\n        }\n        else if (isWxEnv && wx.onError) {\n            wx.onError((error) => {\n                this.handleError(ErrorType.JS_ERROR, error, { source: \"wx.onError\" });\n            });\n        }\n    }\n    /**\n     * è®¾ç½®æœªå¤„ç†çš„Promiseé”™è¯¯å¤„ç†å™¨\n     */\n    setupUnhandledRejectionHandler() {\n        if (isTaroEnv && Taro.onUnhandledRejection) {\n            Taro.onUnhandledRejection((res) => {\n                this.handleError(ErrorType.PROMISE_ERROR, res.reason, {\n                    source: \"Taro.onUnhandledRejection\",\n                });\n            });\n        }\n        else if (isWxEnv && wx.onUnhandledRejection) {\n            wx.onUnhandledRejection((res) => {\n                this.handleError(ErrorType.PROMISE_ERROR, res.reason, {\n                    source: \"wx.onUnhandledRejection\",\n                });\n            });\n        }\n    }\n    /**\n     * è®¾ç½®Consoleé”™è¯¯ç›‘æ§\n     */\n    setupConsoleErrorHandler() {\n        const self = this;\n        this.originalConsole = { ...console };\n        console.error = function (...args) {\n            self.handleError(ErrorType.JS_ERROR, args.join(\" \"), {\n                source: \"console.error\",\n                args: args,\n            });\n            return self.originalConsole.error.apply(console, args);\n        };\n    }\n    /**\n     * å¤„ç†é”™è¯¯\n     * @param type é”™è¯¯ç±»å‹\n     * @param error é”™è¯¯ä¿¡æ¯\n     * @param extra é¢å¤–ä¿¡æ¯\n     */\n    handleError(type, error, extra = {}) {\n        var _a;\n        if (!this.onError)\n            return;\n        const errorData = {\n            id: generateId(),\n            timestamp: getTimestamp(),\n            projectId: this.getProjectId(), // ä½¿ç”¨æ–¹æ³•è·å–projectId\n            projectVersion: (_a = this.config) === null || _a === void 0 ? void 0 : _a.projectVersion, // æ·»åŠ é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯\n            sessionId: generateSessionId(),\n            url: this.getCurrentPagePath(),\n            userAgent: this.getUserAgent(),\n            platform: \"taro-mini\",\n            type,\n            message: typeof error === \"string\" ? error : (error === null || error === void 0 ? void 0 : error.message) || String(error),\n            stack: error === null || error === void 0 ? void 0 : error.stack,\n            error: serializeError(error),\n            ...extra,\n        };\n        console.log(\"ğŸš¨ é”™è¯¯è¢«æ•è·:\", {\n            type: errorData.type,\n            message: errorData.message,\n            projectId: errorData.projectId,\n            url: errorData.url,\n        });\n        this.onError(errorData);\n    }\n    /**\n     * è·å–å½“å‰é¡µé¢è·¯å¾„\n     */\n    getCurrentPagePath() {\n        try {\n            if (typeof getCurrentPages === \"function\") {\n                const pages = getCurrentPages();\n                const currentPage = pages[pages.length - 1];\n                return (currentPage === null || currentPage === void 0 ? void 0 : currentPage.route) || (currentPage === null || currentPage === void 0 ? void 0 : currentPage.__route__) || \"\";\n            }\n        }\n        catch (e) {\n            // å¿½ç•¥é”™è¯¯\n        }\n        return \"\";\n    }\n    /**\n     * è·å–ç”¨æˆ·ä»£ç†ä¿¡æ¯\n     * ä½¿ç”¨æ–°çš„å¾®ä¿¡å°ç¨‹åºAPIæ›¿ä»£åºŸå¼ƒçš„getSystemInfoSync\n     */\n    getUserAgent() {\n        try {\n            if (isTaroEnv) {\n                // ä¼˜å…ˆä½¿ç”¨Taroçš„æ–°API\n                if (Taro.getDeviceInfo && Taro.getSystemSetting) {\n                    const deviceInfo = Taro.getDeviceInfo();\n                    const systemInfo = Taro.getSystemSetting();\n                    return `${deviceInfo.brand || \"Unknown\"} ${deviceInfo.model || \"\"} ${deviceInfo.system || \"\"}`;\n                }\n                // é™çº§ä½¿ç”¨æ—§APIï¼ˆå¦‚æœæ–°APIä¸å¯ç”¨ï¼‰\n                else if (Taro.getSystemInfoSync) {\n                    const systemInfo = Taro.getSystemInfoSync();\n                    return `${systemInfo.brand} ${systemInfo.model} ${systemInfo.system}`;\n                }\n            }\n            else if (isWxEnv) {\n                // ä¼˜å…ˆä½¿ç”¨å¾®ä¿¡å°ç¨‹åºçš„æ–°API\n                if (wx.getDeviceInfo && wx.getSystemSetting) {\n                    const deviceInfo = wx.getDeviceInfo();\n                    const systemInfo = wx.getSystemSetting();\n                    return `${deviceInfo.brand || \"Unknown\"} ${deviceInfo.model || \"\"} ${deviceInfo.system || \"\"}`;\n                }\n                // é™çº§ä½¿ç”¨æ—§APIï¼ˆå¦‚æœæ–°APIä¸å¯ç”¨ï¼‰\n                else if (wx.getSystemInfoSync) {\n                    const systemInfo = wx.getSystemInfoSync();\n                    return `${systemInfo.brand} ${systemInfo.model} ${systemInfo.system}`;\n                }\n            }\n        }\n        catch (e) {\n            // å¦‚æœæ‰€æœ‰APIéƒ½å¤±è´¥ï¼Œè®°å½•é”™è¯¯ä½†ä¸å½±å“ä¸»æµç¨‹\n            console.warn(\"[TaroMonitorSDK] Failed to get system info:\", e);\n        }\n        return \"Taro-MiniProgram\";\n    }\n    destroyErrorListeners() {\n        if (this.originalConsole) {\n            Object.assign(console, this.originalConsole);\n        }\n    }\n    captureError(error, extra) {\n        var _a;\n        const errorData = {\n            id: generateId(),\n            timestamp: getTimestamp(),\n            projectId: this.getProjectId(), // ä½¿ç”¨æ­£ç¡®çš„projectId\n            projectVersion: (_a = this.config) === null || _a === void 0 ? void 0 : _a.projectVersion, // æ·»åŠ é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯\n            sessionId: generateSessionId(),\n            url: this.getCurrentPagePath(),\n            userAgent: this.getUserAgent(),\n            platform: \"taro-mini\",\n            type: ErrorType.CUSTOM_ERROR,\n            message: error instanceof Error ? error.message : String(error),\n            stack: error instanceof Error ? error.stack : undefined,\n            error: serializeError(error),\n            ...extra,\n        };\n        return errorData;\n    }\n    captureHttpError(request) {\n        return {\n            id: generateId(),\n            timestamp: getTimestamp(),\n            projectId: \"\",\n            sessionId: generateSessionId(),\n            url: this.getCurrentPagePath(),\n            userAgent: this.getUserAgent(),\n            platform: \"taro-mini\",\n            type: ErrorType.HTTP_ERROR,\n            message: `HTTP ${request.status}: ${request.method} ${request.url}`,\n            error: {\n                url: request.url,\n                method: request.method,\n                status: request.status,\n                statusText: request.statusText,\n                duration: request.duration,\n            },\n        };\n    }\n}\n/**\n * Taroæ€§èƒ½ç›‘æ§é€‚é…å™¨\n */\nclass TaroPerformanceAdapter {\n    initPerformanceMonitor(onPerformance) {\n        this.onPerformance = onPerformance;\n        this.setupRequestPerformanceMonitor();\n    }\n    /**\n     * è·å–åŸå§‹çš„requestæ–¹æ³•ï¼ˆä¾›SDKå†…éƒ¨ä½¿ç”¨ï¼Œé¿å…è¢«ç›‘æ§ï¼‰\n     */\n    static getOriginalRequest() {\n        return TaroPerformanceAdapter.originalRequest;\n    }\n    /**\n     * è®¾ç½®è¯·æ±‚æ€§èƒ½ç›‘æ§\n     */\n    setupRequestPerformanceMonitor() {\n        const self = this;\n        if (isTaroEnv && Taro.request) {\n            // ä¿å­˜åŸå§‹requestæ–¹æ³•ï¼ˆåªä¿å­˜ä¸€æ¬¡ï¼‰\n            if (!TaroPerformanceAdapter.originalRequest) {\n                TaroPerformanceAdapter.originalRequest = Taro.request;\n            }\n            const originalRequest = TaroPerformanceAdapter.originalRequest;\n            Taro.request = function (options) {\n                const startTime = Date.now();\n                const originalSuccess = options.success;\n                const originalFail = options.fail;\n                options.success = function (res) {\n                    const duration = Date.now() - startTime;\n                    self.recordRequestPerformance(options.url, options.method || \"GET\", res.statusCode, duration, true);\n                    if (originalSuccess)\n                        originalSuccess(res);\n                };\n                options.fail = function (err) {\n                    const duration = Date.now() - startTime;\n                    self.recordRequestPerformance(options.url, options.method || \"GET\", 0, duration, false);\n                    if (originalFail)\n                        originalFail(err);\n                };\n                return originalRequest(options);\n            };\n        }\n        else if (isWxEnv && wx.request) {\n            // ä¿å­˜åŸå§‹requestæ–¹æ³•ï¼ˆåªä¿å­˜ä¸€æ¬¡ï¼‰\n            if (!TaroPerformanceAdapter.originalRequest) {\n                TaroPerformanceAdapter.originalRequest = wx.request;\n            }\n            const originalRequest = TaroPerformanceAdapter.originalRequest;\n            wx.request = function (options) {\n                const startTime = Date.now();\n                const originalSuccess = options.success;\n                const originalFail = options.fail;\n                options.success = function (res) {\n                    const duration = Date.now() - startTime;\n                    self.recordRequestPerformance(options.url, options.method || \"GET\", res.statusCode, duration, true);\n                    if (originalSuccess)\n                        originalSuccess(res);\n                };\n                options.fail = function (err) {\n                    const duration = Date.now() - startTime;\n                    self.recordRequestPerformance(options.url, options.method || \"GET\", 0, duration, false);\n                    if (originalFail)\n                        originalFail(err);\n                };\n                return originalRequest(options);\n            };\n        }\n    }\n    /**\n     * è®°å½•è¯·æ±‚æ€§èƒ½\n     */\n    recordRequestPerformance(url, method, status, duration, success) {\n        if (!this.onPerformance)\n            return;\n        // è¿‡æ»¤SDKç›‘æ§æ¥å£çš„è¯·æ±‚\n        const monitorEndpoints = [\n            \"/api/monitor/report\",\n            \"/api/monitor/data\",\n            \"/api/monitor/stats\",\n            \"/api/error-logs\",\n            \"/api/health\",\n        ];\n        const isMonitorEndpoint = monitorEndpoints.some((endpoint) => url.includes(endpoint));\n        if (isMonitorEndpoint) {\n            console.log(\"ğŸš« è¿‡æ»¤SDKç›‘æ§æ¥å£æ€§èƒ½æ•°æ®:\", url);\n            return; // ä¸è®°å½•SDKç›¸å…³çš„ç½‘ç»œè¯·æ±‚æ€§èƒ½\n        }\n        // æ–°å¢ï¼šæ£€æŸ¥å½“å‰é¡µé¢å †æ ˆï¼Œå¦‚æœæ¥è‡ªSDKå†…éƒ¨è°ƒç”¨åˆ™è¿‡æ»¤\n        try {\n            const stack = new Error().stack || \"\";\n            const isSDKInternalCall = stack.includes(\"sendSingleData\") ||\n                stack.includes(\"TaroNetworkAdapter\") ||\n                stack.includes(\"sendData\");\n            if (isSDKInternalCall) {\n                console.log(\"ğŸš« è¿‡æ»¤SDKå†…éƒ¨è°ƒç”¨çš„ç½‘ç»œè¯·æ±‚:\", url);\n                return;\n            }\n        }\n        catch (e) {\n            // å¿½ç•¥å †æ ˆæ£€æŸ¥é”™è¯¯\n        }\n        const performanceData = {\n            id: generateId(),\n            timestamp: getTimestamp(),\n            projectId: \"\",\n            sessionId: generateSessionId(),\n            url: this.getCurrentPagePath(),\n            userAgent: this.getUserAgent(),\n            platform: \"taro-mini\",\n            type: PerformanceType.HTTP_REQUEST,\n            metrics: {\n                duration,\n                status,\n                success: success ? 1 : 0,\n            },\n            resource: {\n                name: url,\n                size: 0,\n                duration,\n                type: \"request\",\n            },\n        };\n        this.onPerformance(performanceData);\n    }\n    getCurrentPagePath() {\n        try {\n            if (typeof getCurrentPages === \"function\") {\n                const pages = getCurrentPages();\n                const currentPage = pages[pages.length - 1];\n                return (currentPage === null || currentPage === void 0 ? void 0 : currentPage.route) || (currentPage === null || currentPage === void 0 ? void 0 : currentPage.__route__) || \"\";\n            }\n        }\n        catch (e) {\n            // å¿½ç•¥é”™è¯¯\n        }\n        return \"\";\n    }\n    getUserAgent() {\n        try {\n            if (isTaroEnv && Taro.getSystemInfoSync) {\n                const systemInfo = Taro.getSystemInfoSync();\n                return `${systemInfo.brand} ${systemInfo.model} ${systemInfo.system}`;\n            }\n            else if (isWxEnv && wx.getSystemInfoSync) {\n                const systemInfo = wx.getSystemInfoSync();\n                return `${systemInfo.brand} ${systemInfo.model} ${systemInfo.system}`;\n            }\n        }\n        catch (e) {\n            // å¿½ç•¥é”™è¯¯\n        }\n        return \"Taro-MiniProgram\";\n    }\n    destroyPerformanceMonitor() {\n        // æ¸…ç†æ€§èƒ½ç›‘æ§\n    }\n    recordPerformance(name, metrics) {\n        return {\n            id: generateId(),\n            timestamp: getTimestamp(),\n            projectId: \"\",\n            sessionId: generateSessionId(),\n            url: this.getCurrentPagePath(),\n            userAgent: this.getUserAgent(),\n            platform: \"taro-mini\",\n            type: PerformanceType.CUSTOM_METRIC,\n            metrics,\n        };\n    }\n    getPagePerformance() {\n        return {};\n    }\n}\nTaroPerformanceAdapter.originalRequest = null; // ä¿å­˜åŸå§‹çš„requestæ–¹æ³•\n/**\n * Taroè¡Œä¸ºç›‘æ§é€‚é…å™¨\n */\nclass TaroBehaviorAdapter {\n    initBehaviorMonitor(onBehavior) {\n        this.onBehavior = onBehavior;\n    }\n    destroyBehaviorMonitor() {\n        // æ¸…ç†è¡Œä¸ºç›‘æ§\n    }\n    recordBehavior(event, data) {\n        return {\n            id: generateId(),\n            timestamp: getTimestamp(),\n            projectId: \"\",\n            sessionId: generateSessionId(),\n            url: this.getCurrentPagePath(),\n            userAgent: this.getUserAgent(),\n            platform: \"taro-mini\",\n            type: BehaviorType.CUSTOM,\n            event,\n            data,\n        };\n    }\n    getCurrentPagePath() {\n        try {\n            if (typeof getCurrentPages === \"function\") {\n                const pages = getCurrentPages();\n                const currentPage = pages[pages.length - 1];\n                return (currentPage === null || currentPage === void 0 ? void 0 : currentPage.route) || (currentPage === null || currentPage === void 0 ? void 0 : currentPage.__route__) || \"\";\n            }\n        }\n        catch (e) {\n            // å¿½ç•¥é”™è¯¯\n        }\n        return \"\";\n    }\n    getUserAgent() {\n        try {\n            if (isTaroEnv && Taro.getSystemInfoSync) {\n                const systemInfo = Taro.getSystemInfoSync();\n                return `${systemInfo.brand} ${systemInfo.model} ${systemInfo.system}`;\n            }\n            else if (isWxEnv && wx.getSystemInfoSync) {\n                const systemInfo = wx.getSystemInfoSync();\n                return `${systemInfo.brand} ${systemInfo.model} ${systemInfo.system}`;\n            }\n        }\n        catch (e) {\n            // å¿½ç•¥é”™è¯¯\n        }\n        return \"Taro-MiniProgram\";\n    }\n}\n/**\n * Taroç½‘ç»œé€‚é…å™¨\n */\nclass TaroNetworkAdapter {\n    interceptNetwork(onRequest, onResponse, onError) {\n        // ç½‘ç»œæ‹¦æˆªå®ç°\n    }\n    async sendData(url, data, options) {\n        // å¦‚æœæ˜¯æ•°ç»„ï¼Œéœ€è¦é€ä¸ªå‘é€ï¼ˆå› ä¸ºåç«¯æ¥å£åªæ”¯æŒå•æ¡æ•°æ®ï¼‰\n        if (Array.isArray(data)) {\n            const results = [];\n            for (const item of data) {\n                // è¿‡æ»¤SDKç›¸å…³æ•°æ®\n                if (this.shouldFilterSDKRelatedData(item)) {\n                    console.log(\"ğŸš« è¿‡æ»¤äº†SDKç›¸å…³æ•°æ®ï¼Œä¸è¿›è¡Œä¸ŠæŠ¥\");\n                    continue; // è·³è¿‡è¯¥æ•°æ®ï¼Œä¸ä¸ŠæŠ¥\n                }\n                try {\n                    const transformedData = this.transformDataToReportDto(item);\n                    const result = await this.sendSingleData(url, transformedData, options);\n                    results.push(result);\n                    console.log(\"âœ… æ•°æ®ä¸ŠæŠ¥æˆåŠŸ:\", transformedData.type, transformedData.errorMessage || transformedData.type);\n                }\n                catch (error) {\n                    console.error(\"âŒ æ•°æ®ä¸ŠæŠ¥å¤±è´¥:\", error);\n                    throw error;\n                }\n            }\n            return results;\n        }\n        else {\n            // å•æ¡æ•°æ®\n            // è¿‡æ»¤SDKç›¸å…³æ•°æ®\n            if (this.shouldFilterSDKRelatedData(data)) {\n                console.log(\"ğŸš« è¿‡æ»¤äº†SDKç›¸å…³æ•°æ®ï¼Œä¸è¿›è¡Œä¸ŠæŠ¥\");\n                return { filtered: true, reason: \"SDK related data\" };\n            }\n            const transformedData = this.transformDataToReportDto(data);\n            return this.sendSingleData(url, transformedData, options);\n        }\n    }\n    /**\n     * æ£€æŸ¥æ˜¯å¦ä¸ºSDKç›¸å…³çš„è¯·æ±‚æˆ–é”™è¯¯ï¼Œéœ€è¦è¿‡æ»¤æ‰\n     * @param data ç›‘æ§æ•°æ®\n     * @returns æ˜¯å¦åº”è¯¥è¿‡æ»¤ï¼ˆtrueè¡¨ç¤ºè¿‡æ»¤æ‰ï¼Œä¸ä¸ŠæŠ¥ï¼‰\n     */\n    shouldFilterSDKRelatedData(data) {\n        var _a, _b;\n        // è¿‡æ»¤ç›‘æ§æ¥å£ç›¸å…³çš„è¯·æ±‚\n        const monitorEndpoints = [\n            \"/api/monitor/report\",\n            \"/api/monitor/data\",\n            \"/api/monitor/stats\",\n            \"/api/error-logs\",\n            \"/api/health\",\n        ];\n        // æ£€æŸ¥ç½‘ç»œè¯·æ±‚æ€§èƒ½æ•°æ®\n        if (data.type === \"http_request\" || data.type === \"slowHttpRequest\") {\n            if ((_a = data.error) === null || _a === void 0 ? void 0 : _a.url) {\n                const isMonitorEndpoint = monitorEndpoints.some((endpoint) => data.error.url.includes(endpoint));\n                if (isMonitorEndpoint) {\n                    console.log(\"ğŸš« è¿‡æ»¤SDKç›‘æ§æ¥å£è¯·æ±‚:\", data.error.url);\n                    return true;\n                }\n            }\n            // æ£€æŸ¥extraDataä¸­çš„resource.name\n            if (data.extraData) {\n                try {\n                    const extraData = typeof data.extraData === \"string\"\n                        ? JSON.parse(data.extraData)\n                        : data.extraData;\n                    if ((_b = extraData.resource) === null || _b === void 0 ? void 0 : _b.name) {\n                        const isMonitorEndpoint = monitorEndpoints.some((endpoint) => extraData.resource.name.includes(endpoint));\n                        if (isMonitorEndpoint) {\n                            console.log(\"ğŸš« è¿‡æ»¤SDKç›‘æ§æ¥å£è¯·æ±‚:\", extraData.resource.name);\n                            return true;\n                        }\n                    }\n                }\n                catch (e) {\n                    // å¿½ç•¥JSONè§£æé”™è¯¯\n                }\n            }\n        }\n        // è¿‡æ»¤SDKå†…éƒ¨é”™è¯¯\n        if (data.message || data.errorMessage) {\n            const errorMessage = data.message || data.errorMessage;\n            const sdkErrorPatterns = [\n                \"MonitorSDK\",\n                \"TaroMonitorSDK\",\n                \"PlatformAdapter\",\n                \"BaseManager\",\n                \"sendData\",\n                \"transformDataToReportDto\",\n                \"monitor/report\",\n                \"monitor initialization\",\n                \"SDK not initialized\",\n            ];\n            const isSDKError = sdkErrorPatterns.some((pattern) => errorMessage.toLowerCase().includes(pattern.toLowerCase()));\n            if (isSDKError) {\n                console.log(\"ğŸš« è¿‡æ»¤SDKå†…éƒ¨é”™è¯¯:\", errorMessage);\n                return true;\n            }\n        }\n        // è¿‡æ»¤SDKå †æ ˆè·Ÿè¸ª\n        if (data.stack || data.errorStack) {\n            const stack = data.stack || data.errorStack;\n            const sdkStackPatterns = [\n                \"TaroPlatformAdapter\",\n                \"BaseManager\",\n                \"sendData\",\n                \"transformDataToReportDto\",\n                \"TaroMonitorSDK\",\n            ];\n            const isSDKStack = sdkStackPatterns.some((pattern) => stack.includes(pattern));\n            if (isSDKStack) {\n                console.log(\"ğŸš« è¿‡æ»¤SDKå†…éƒ¨å †æ ˆé”™è¯¯\");\n                return true;\n            }\n        }\n        return false;\n    }\n    transformDataToReportDto(data) {\n        console.log(\"ğŸ”„ å¼€å§‹æ•°æ®è½¬æ¢ï¼ŒåŸå§‹æ•°æ®:\", data);\n        // åŸºç¡€å­—æ®µæ˜ å°„\n        const reportData = {\n            projectId: data.projectId || \"default-project\",\n            type: this.mapErrorTypeToReportType(data.type),\n            pageUrl: data.url || data.pageUrl,\n            userAgent: data.userAgent,\n        };\n        // æ·»åŠ é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯ï¼ˆé‡è¦ï¼šä½œä¸ºé¡¶çº§å­—æ®µï¼‰\n        if (data.projectVersion) {\n            reportData.projectVersion = data.projectVersion;\n        }\n        // æ ¹æ®æ•°æ®ç±»å‹æ·»åŠ ç‰¹å®šå­—æ®µ\n        if (data.message) {\n            reportData.errorMessage = data.message;\n        }\n        if (data.stack) {\n            reportData.errorStack = data.stack;\n        }\n        if (data.sessionId) {\n            reportData.userId = data.sessionId; // ä½¿ç”¨sessionIdä½œä¸ºuserId\n        }\n        // æ€§èƒ½æ•°æ®å¤„ç†\n        if (data.metrics) {\n            reportData.performanceData = JSON.stringify(data.metrics);\n        }\n        // HTTPé”™è¯¯æ•°æ®å¤„ç†\n        if (data.error && typeof data.error === \"object\") {\n            if (data.error.url)\n                reportData.requestUrl = data.error.url;\n            if (data.error.method)\n                reportData.requestMethod = data.error.method;\n            if (data.error.status)\n                reportData.responseStatus = data.error.status;\n            if (data.error.duration)\n                reportData.duration = data.error.duration;\n        }\n        // å¤„ç†é¢å¤–æ•°æ® - å°†æ‰€æœ‰æœªæ˜ å°„çš„å­—æ®µåˆå¹¶åˆ°extraDataä¸­\n        const extraFields = {};\n        // æ”¶é›†æ‰€æœ‰é¢å¤–å­—æ®µ\n        Object.keys(data).forEach((key) => {\n            if (![\n                \"id\",\n                \"timestamp\",\n                \"projectId\",\n                \"projectVersion\", // æ·»åŠ projectVersionåˆ°æ’é™¤åˆ—è¡¨\n                \"sessionId\",\n                \"url\",\n                \"pageUrl\",\n                \"userAgent\",\n                \"platform\",\n                \"type\",\n                \"message\",\n                \"stack\",\n                \"error\",\n                \"metrics\",\n            ].includes(key)) {\n                extraFields[key] = data[key];\n            }\n        });\n        // å¦‚æœæœ‰é¢å¤–æ•°æ®æˆ–è€…åŸæœ‰çš„extra/dataå­—æ®µï¼Œåˆå¹¶å¤„ç†\n        if (Object.keys(extraFields).length > 0 || data.extra || data.data) {\n            const combinedExtra = {\n                ...extraFields,\n                ...(data.extra || {}),\n                ...(data.data || {}),\n            };\n            reportData.extraData = JSON.stringify(combinedExtra);\n        }\n        console.log(\"âœ… æ•°æ®è½¬æ¢å®Œæˆï¼Œè½¬æ¢åæ•°æ®:\", reportData);\n        // éªŒè¯å¿…éœ€å­—æ®µ\n        if (!reportData.projectId || !reportData.type) {\n            console.error(\"âŒ æ•°æ®è½¬æ¢åç¼ºå°‘å¿…éœ€å­—æ®µ:\", {\n                projectId: reportData.projectId,\n                type: reportData.type,\n            });\n        }\n        return reportData;\n    }\n    /**\n     * å°†SDKé”™è¯¯ç±»å‹æ˜ å°„ä¸ºåç«¯æœŸæœ›çš„ç±»å‹\n     * @param sdkType SDKé”™è¯¯ç±»å‹\n     * @returns åç«¯ç±»å‹\n     */\n    mapErrorTypeToReportType(sdkType) {\n        console.log(\"ğŸ”„ æ˜ å°„é”™è¯¯ç±»å‹:\", sdkType);\n        const typeMap = {\n            // SDKå†…éƒ¨é”™è¯¯ç±»å‹ -> åç«¯æœŸæœ›ç±»å‹\n            js_error: \"jsError\",\n            promise_error: \"unHandleRejection\",\n            http_error: \"reqError\",\n            custom_error: \"jsError\",\n            custom_metric: \"performanceInfoReady\",\n            http_request: \"slowHttpRequest\",\n            // ç›´æ¥æ˜ å°„åç«¯ç±»å‹ï¼ˆå…¼å®¹æ€§ï¼‰\n            jsError: \"jsError\",\n            unHandleRejection: \"unHandleRejection\",\n            reqError: \"reqError\",\n            performanceInfoReady: \"performanceInfoReady\",\n            slowHttpRequest: \"slowHttpRequest\",\n        };\n        const mappedType = typeMap[sdkType] || \"jsError\";\n        console.log(\"âœ… ç±»å‹æ˜ å°„ç»“æœ:\", sdkType, \"->\", mappedType);\n        return mappedType;\n    }\n    /**\n     * å‘é€å•æ¡æ•°æ®\n     * @param url è¯·æ±‚URL\n     * @param data æ•°æ®\n     * @param options é€‰é¡¹\n     * @returns Promise\n     */\n    async sendSingleData(url, data, options) {\n        return new Promise((resolve, reject) => {\n            console.log(\"ğŸš€ å‘é€æ•°æ®åˆ°:\", url);\n            console.log(\"ğŸ“Š æ•°æ®å†…å®¹:\", data);\n            const requestOptions = {\n                url,\n                method: \"POST\",\n                data,\n                header: {\n                    \"Content-Type\": \"application/json\",\n                    ...options === null || options === void 0 ? void 0 : options.headers,\n                },\n                timeout: (options === null || options === void 0 ? void 0 : options.timeout) || 5000,\n                success: (res) => {\n                    console.log(\"âœ… è¯·æ±‚æˆåŠŸ:\", res.statusCode, res.data);\n                    if (res.statusCode >= 200 && res.statusCode < 300) {\n                        resolve(res.data);\n                    }\n                    else {\n                        console.error(\"âŒ HTTPé”™è¯¯:\", res.statusCode, res.data);\n                        reject(new Error(`HTTP ${res.statusCode}: ${res.errMsg || \"Request failed\"}`));\n                    }\n                },\n                fail: (err) => {\n                    console.error(\"âŒ è¯·æ±‚å¤±è´¥:\", err);\n                    reject(new Error(err.errMsg || \"Request failed\"));\n                },\n            };\n            // ä¼˜å…ˆä½¿ç”¨åŸå§‹çš„æœªè¢«æ‹¦æˆªçš„requestæ–¹æ³•ï¼Œé¿å…SDKç›‘æ§è‡ªå·±çš„ä¸ŠæŠ¥è¯·æ±‚\n            const originalRequest = TaroPerformanceAdapter.getOriginalRequest();\n            if (originalRequest) {\n                console.log(\"ğŸ“¡ ä½¿ç”¨åŸå§‹requestæ–¹æ³•å‘é€æ•°æ®ï¼Œé¿å…é‡å¤ç›‘æ§\");\n                originalRequest(requestOptions);\n            }\n            else if (isTaroEnv && Taro.request) {\n                console.log(\"âš ï¸ ä½¿ç”¨å½“å‰Taro.requestæ–¹æ³•ï¼ˆå¯èƒ½è¢«ç›‘æ§ï¼‰\");\n                Taro.request(requestOptions);\n            }\n            else if (isWxEnv && wx.request) {\n                console.log(\"âš ï¸ ä½¿ç”¨å½“å‰wx.requestæ–¹æ³•ï¼ˆå¯èƒ½è¢«ç›‘æ§ï¼‰\");\n                wx.request(requestOptions);\n            }\n            else {\n                reject(new Error(\"Request API not available\"));\n            }\n        });\n    }\n}\n/**\n * Taroå­˜å‚¨é€‚é…å™¨\n */\nclass TaroStorageAdapter {\n    setItem(key, value) {\n        try {\n            if (isTaroEnv && Taro.setStorageSync) {\n                Taro.setStorageSync(key, value);\n            }\n            else if (isWxEnv && wx.setStorageSync) {\n                wx.setStorageSync(key, value);\n            }\n        }\n        catch (error) {\n            console.warn(\"[TaroStorageAdapter] setItem failed:\", error);\n        }\n    }\n    getItem(key) {\n        try {\n            if (isTaroEnv && Taro.getStorageSync) {\n                return Taro.getStorageSync(key) || null;\n            }\n            else if (isWxEnv && wx.getStorageSync) {\n                return wx.getStorageSync(key) || null;\n            }\n        }\n        catch (error) {\n            console.warn(\"[TaroStorageAdapter] getItem failed:\", error);\n        }\n        return null;\n    }\n    removeItem(key) {\n        try {\n            if (isTaroEnv && Taro.removeStorageSync) {\n                Taro.removeStorageSync(key);\n            }\n            else if (isWxEnv && wx.removeStorageSync) {\n                wx.removeStorageSync(key);\n            }\n        }\n        catch (error) {\n            console.warn(\"[TaroStorageAdapter] removeItem failed:\", error);\n        }\n    }\n    clear() {\n        try {\n            if (isTaroEnv && Taro.clearStorageSync) {\n                Taro.clearStorageSync();\n            }\n            else if (isWxEnv && wx.clearStorageSync) {\n                wx.clearStorageSync();\n            }\n        }\n        catch (error) {\n            console.warn(\"[TaroStorageAdapter] clear failed:\", error);\n        }\n    }\n}\n/**\n * Taroå¹³å°é€‚é…å™¨\n */\nclass TaroPlatformAdapter {\n    constructor() {\n        this.platformInfo = this.getPlatformInfo();\n        this.errorCapture = new TaroErrorCapture();\n        this.performance = new TaroPerformanceAdapter();\n        this.behavior = new TaroBehaviorAdapter();\n        this.network = new TaroNetworkAdapter();\n        this.storage = new TaroStorageAdapter();\n    }\n    /**\n     * è·å–å¹³å°ä¿¡æ¯\n     */\n    getPlatformInfo() {\n        let deviceInfo = {};\n        try {\n            if (isTaroEnv && Taro.getSystemInfoSync) {\n                deviceInfo = Taro.getSystemInfoSync();\n            }\n            else if (isWxEnv && wx.getSystemInfoSync) {\n                deviceInfo = wx.getSystemInfoSync();\n            }\n        }\n        catch (e) {\n            console.warn(\"[TaroPlatformAdapter] Failed to get system info:\", e);\n        }\n        return {\n            platform: \"taro-mini\",\n            version: \"1.0.0\",\n            userAgent: `${deviceInfo.brand || \"Unknown\"} ${deviceInfo.model || \"Unknown\"} ${deviceInfo.system || \"Unknown\"}`,\n            deviceInfo: {\n                brand: deviceInfo.brand,\n                model: deviceInfo.model,\n                system: deviceInfo.system,\n                platform: deviceInfo.platform,\n                version: deviceInfo.version,\n                SDKVersion: deviceInfo.SDKVersion,\n                screenWidth: deviceInfo.screenWidth,\n                screenHeight: deviceInfo.screenHeight,\n                windowWidth: deviceInfo.windowWidth,\n                windowHeight: deviceInfo.windowHeight,\n                pixelRatio: deviceInfo.pixelRatio,\n                language: deviceInfo.language,\n            },\n        };\n    }\n    init(config) {\n        console.log(\"[TaroPlatformAdapter] Initialized with config:\", config);\n        // å°†é…ç½®ä¼ é€’ç»™é”™è¯¯æ•è·å™¨\n        if (this.errorCapture && \"setConfig\" in this.errorCapture) {\n            this.errorCapture.setConfig(config);\n        }\n    }\n    destroy() {\n        this.errorCapture.destroyErrorListeners();\n        this.performance.destroyPerformanceMonitor();\n        this.behavior.destroyBehaviorMonitor();\n        console.log(\"[TaroPlatformAdapter] Destroyed\");\n    }\n}\n\n/**\n * Taroç›‘æ§SDK\n * åŸºäºCoreæ¶æ„çš„Taroå¹³å°SDKå®ç°\n */\n// å¯¼å…¥é…ç½®æ¨¡æ¿\nconst Templates = {\n    TaroBasic: {\n        error: {\n            enabled: true,\n            captureConsole: true,\n            maxErrors: 50,\n        },\n        performance: {\n            enabled: true,\n            capturePageLoad: true,\n            captureNetworkTiming: true,\n        },\n        behavior: {\n            enabled: true,\n            capturePageViews: true,\n            captureTaps: true,\n            captureRouteChange: true,\n        },\n        report: {\n            interval: 15000,\n            batchSize: 10,\n            maxRetries: 2,\n        },\n    },\n};\n/**\n * åˆ›å»ºé…ç½®\n * @param template é…ç½®æ¨¡æ¿\n * @param overrides è‡ªå®šä¹‰è¦†ç›–é…ç½®\n * @returns æœ€ç»ˆé…ç½®\n */\nfunction createConfig(template, overrides = {}) {\n    return {\n        ...template,\n        ...overrides,\n        error: { ...template.error, ...overrides.error },\n        performance: { ...template.performance, ...overrides.performance },\n        behavior: { ...template.behavior, ...overrides.behavior },\n        report: { ...template.report, ...overrides.report },\n    };\n}\n/**\n * Taroç›‘æ§SDKç±»\n */\nclass TaroMonitorSDK extends BaseManager {\n    constructor(config) {\n        const platformAdapter = new TaroPlatformAdapter();\n        super(config, platformAdapter);\n    }\n    /**\n     * åˆå§‹åŒ–Taroç›‘æ§SDKï¼ˆå•ä¾‹æ¨¡å¼ï¼‰\n     * @param config é…ç½®é€‰é¡¹\n     * @returns SDKå®ä¾‹\n     */\n    static init(config) {\n        if (TaroMonitorSDK.instance) {\n            console.warn(\"[TaroMonitorSDK] SDK already initialized, returning existing instance\");\n            return TaroMonitorSDK.instance;\n        }\n        TaroMonitorSDK.instance = new TaroMonitorSDK(config);\n        // è‡ªåŠ¨åˆå§‹åŒ–\n        TaroMonitorSDK.instance.init().catch((error) => {\n            console.error(\"[TaroMonitorSDK] Failed to initialize:\", error);\n        });\n        return TaroMonitorSDK.instance;\n    }\n    /**\n     * è·å–å½“å‰SDKå®ä¾‹\n     * @returns SDKå®ä¾‹æˆ–null\n     */\n    static getInstance() {\n        return TaroMonitorSDK.instance;\n    }\n    /**\n     * é”€æ¯SDK\n     */\n    static destroy() {\n        if (TaroMonitorSDK.instance) {\n            TaroMonitorSDK.instance.destroy();\n            TaroMonitorSDK.instance = null;\n        }\n    }\n}\nTaroMonitorSDK.instance = null;\n// ä¾¿æ·çš„é™æ€æ–¹æ³•\nconst TaroMonitorSDKHelper = {\n    /**\n     * å¿«é€Ÿå¼€å§‹æ–¹æ³•\n     */\n    quickStart: {\n        /**\n         * Taroåº”ç”¨å¿«é€Ÿå¼€å§‹\n         * @param projectId é¡¹ç›®ID\n         * @param serverUrl æœåŠ¡å™¨åœ°å€\n         * @param options é¢å¤–é…ç½®\n         * @returns SDKå®ä¾‹\n         */\n        taro: (projectId, serverUrl, options = {}) => {\n            const config = createConfig(Templates.TaroBasic, {\n                projectId,\n                serverUrl,\n                ...options,\n            });\n            return TaroMonitorSDK.init(config);\n        },\n    },\n    /**\n     * åˆå§‹åŒ–ç›‘æ§SDK\n     * @param config é…ç½®é€‰é¡¹\n     * @returns SDKå®ä¾‹\n     */\n    init: (config) => TaroMonitorSDK.init(config),\n    /**\n     * è·å–å½“å‰å®ä¾‹\n     * @returns SDKå®ä¾‹æˆ–null\n     */\n    getInstance: () => TaroMonitorSDK.getInstance(),\n    /**\n     * æ‰‹åŠ¨æ•è·é”™è¯¯\n     * @param error é”™è¯¯å¯¹è±¡æˆ–æ¶ˆæ¯\n     * @param extra é¢å¤–ä¿¡æ¯\n     */\n    captureError: (error, extra) => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            instance.captureError(error, extra);\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n        }\n    },\n    /**\n     * è®°å½•æ€§èƒ½æŒ‡æ ‡\n     * @param name æŒ‡æ ‡åç§°\n     * @param metrics æŒ‡æ ‡æ•°æ®\n     */\n    recordPerformance: (name, metrics) => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            instance.recordPerformance(name, metrics);\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n        }\n    },\n    /**\n     * è®°å½•ç”¨æˆ·è¡Œä¸º\n     * @param event äº‹ä»¶åç§°\n     * @param data äº‹ä»¶æ•°æ®\n     */\n    recordBehavior: (event, data) => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            instance.recordBehavior(event, data);\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n        }\n    },\n    /**\n     * ç«‹å³ä¸ŠæŠ¥æ•°æ®\n     */\n    flush: async () => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            await instance.flush();\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n        }\n    },\n    /**\n     * è·å–SDKçŠ¶æ€\n     */\n    getStatus: () => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            return instance.getStatus();\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n            return null;\n        }\n    },\n    /**\n     * é”€æ¯SDK\n     */\n    destroy: () => TaroMonitorSDK.destroy(),\n    /**\n     * ç›‘å¬äº‹ä»¶\n     * @param event äº‹ä»¶åç§°\n     * @param listener ç›‘å¬å™¨å‡½æ•°\n     */\n    on: (event, listener) => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            instance.on(event, listener);\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n        }\n    },\n    /**\n     * ç§»é™¤äº‹ä»¶ç›‘å¬\n     * @param event äº‹ä»¶åç§°\n     * @param listener ç›‘å¬å™¨å‡½æ•°\n     */\n    off: (event, listener) => {\n        const instance = TaroMonitorSDK.getInstance();\n        if (instance) {\n            instance.off(event, listener);\n        }\n        else {\n            console.warn(\"[TaroMonitorSDK] SDK not initialized, call init() first\");\n        }\n    },\n};\n// å…¼å®¹åŸæœ‰çš„åˆå§‹åŒ–æ–¹å¼\nconst initTaroMonitor = TaroMonitorSDKHelper.init;\n\nexport { BehaviorType, ErrorType, PerformanceType, TaroMonitorSDK, Templates, createConfig, TaroMonitorSDKHelper as default, initTaroMonitor };\n//# sourceMappingURL=index.esm.js.map\n"],"names":[],"sourceRoot":""}